<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>VALIDe</title>
	<link rel="stylesheet" type="text/css" href="css/estilos.css" media="screen">
	<meta http-equiv="Expires" content="0">
	<meta http-equiv="Last-Modified" content="0">
	<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
	<meta http-equiv="content-script-type" content="text/javascript"> 
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Expires" content="0">
	<meta http-equiv="Cache-Control" content="no-cache,no-store">
	<meta name="lang" content="es">
	<meta name="author" content="Dirección General para el impulso de la Administración Electrónica">
	<meta name="organization" content="Ministerio de Hacienda y Administraciones Públicas">
	<meta name="locality" content="Madrid, España">
	<meta name="keywords" content="VALIDe, validacion firmas, validacion certificados, realizar firma, demostrador @firma, @firma, cliente firma, firma electrónica, certificado electrónico, CMS, CAdES, XAdES, XMLDSig">
	<meta name="description" content="Firma móvil. Web de pruebas del Cliente @firma móvil ">
	<script type="text/javascript" src="js/autoscript.js"></script>
	<script type="text/javascript" defer="defer">
	<!--
		
		function seleccionarCertificado() {
			var divMensaje = document.getElementById('divmensaje');
			divMensaje.innerHTML='';
			var divCert = document.getElementById('divcert');
			divCert.innerHTML='';
			mostrarDialogoEspera();
			
			try {
				AutoScript.selectCertificate(null, successCallback, errorCallback);
			}
			catch (excep) {
				errorCallback(AutoScript.getErrorType(), AutoScript.getErrorMessage());
				//Se puede recuperar el mensaje de error y pintarlo en la pantalla
				var msg = AutoScript.getErrorMessage();
				if (msg==undefined || msg==null) msg = excep.message;
				if (msg==undefined || msg==null) msg = '';
				divMensaje.innerHTML='<br><div class="iconErrorFirma">Error al recuperar el certificado</div><br>' + msg + '<br>';
			}
			
		}
		
		function successCallback(certB64) {
			
			ocultarDialogoEspera();

			var divMensaje = document.getElementById('divmensaje');
			divMensaje.innerHTML='<br><div class="iconOKFirma">Certificado seleccionado correctamente</div>';
			
			var divCert = document.getElementById('divcert');
			var content = '<br><textarea id="certB64" cols="76" rows="6">' + certB64 + '</textarea><br>';
			divCert.innerHTML = content;
		}
		
		function errorCallback(errorType, errorMessage) {
			
			ocultarDialogoEspera();
			
			var divMensaje = document.getElementById('divmensaje');
			divMensaje.innerHTML='<br><div class="iconErrorFirma">Error al firmar</div><br>' +
					'<div style="width: 300pt">' + errorMessage + '</div>' + '<br>';
		}
		
		function mostrarPantalla() {
			document.getElementById("pantalla").style.display = "block";
			
			if (AutoScript.isIOS()) {				
				var storeLink = document.getElementById("afirmaStoreLink");
				storeLink.href="https://itunes.apple.com/es/app/cliente-firma-movil/id627410001?mt=8&uo=4";
				storeLink.innerHTML = "Descargue el Cliente @firma iOS";
				
				document.getElementById("faq_link").style.display = "none";
			}
			else if (AutoScript.isAndroid()) {
				var storeLink = document.getElementById("afirmaStoreLink");
				storeLink.href="https://play.google.com/store/apps/details?id=es.gob.afirma";
				storeLink.innerHTML = "Descargue el Cliente @firma Android";

				document.getElementById("faq_link").style.display = "none";
			}
		}
		
		function mostrarDialogoEspera() {
			document.getElementById("dialogoEspera").style.display = "block";
		}
		
		function ocultarDialogoEspera() {
			document.getElementById("dialogoEspera").style.display = "none";
		}
	-->
		AutoScript.cargarAppAfirma();
		AutoScript.setServlets(window.location.origin + "/afirma-signature-storage/StorageService", window.location.origin + "/afirma-signature-retriever/RetrieveService");
	</script>
<body onload="mostrarPantalla()">
	<!-- CONTENEDOR ** -->
	<div id="contenedor" style="background-color: rgb(230,230,230)">
		<div id="cabecera">
			

<div class="cabecera">
	<a title="Cliente Afirma" class="floatLeft">
		<img src="img/logo_cliente.png" alt="Cliente @firma" title="Ciente @firma" style="width: 180px; height: 57px; margin-left: 26px; margin-top: 10px;">
	</a>
	<a href="https://www.lamoncloa.gob.es/" title="Gobierno de España">
		<img src="img/logoGobEsp.PNG" alt="www.lamoncloa.gob.es" title="Gobierno de España" class="logoGobEsp">
	</a>
</div>
<div class="clear"></div>
		</div>
		<div id="contenidoTop"></div>
		<div id="contenido">
			<div id="cuerpo" style="background-color: rgb(248,248,248);">
				<div class="bloqueDerechoInterior">


<div id="dialogoEspera" style="display: none;background-color: rgba(50,50,50,0.3); width: 100%; height: 100%; z-index: 9990; position: fixed; left: 0; top: 0; ">
	<div style="background-color: white; position: fixed; top: 30%; left: 35%; width: 30%; padding: 20px; border: 2px solid black; border-radius: 15px;">
		<span style="text-align: center; font-weight: bold; font-size: 20pt;">Cargando...</span>
	</div>
</div>
<div id="pantalla" style="display: block;">
<form id="sede">
	<h2>
		<img src="img/icon_realizarFirma.png" alt="validar sede" class="VASub VANormalIE7">
		<span>Selecci&oacute;n de certificados</span>
	</h2>
	<p>P&aacute;gina de prueba de la operaci&oacute;n de selecci&oacute;n de
	certificado electr&oacute;nico. S&oacute;lo se acceder&aacute; localmente a
	la informaci&oacute;n p&uacute;blica de su certificado y esta no se enviar&aacute;,
	almacenar&aacute; o utilizar&aacute; de ninguna manera.</p>
	<div class="separadorSeccion"></div>
	<fieldset style="background-color: rgb(252,252,252)">
	<div id="divmensaje"></div>
	<p>Para realizar la selecci&oacute;n de un certificado:</p><br/>

	<div class="lblAnchoMaxMB">
			<span>1. <a id="afirmaStoreLink" href="http://firmaelectronica.gob.es/Home/Descargas.html">Descargue Autofirma</a></span>
			<span id="faq_link" style="display: block; padding-left: 50px; padding-top: 10px">Si tiene dudas o alg&uacute;n problema durante la instalaci&oacute;n, consulte la <a target="_blank" href="https://github.com/ctt-gob-es/clienteafirma/wiki/Instalaci%C3%B3n-AutoFirma:-Problemas-conocidos">Wiki del proyecto</a></span>
	</div><br/>
	<div class="lb2AnchoMaxMB">
			<span>2. Pulse el bot&oacute;n "Seleccionar Certificado".</span>
	</div><br/>
	<br/>
	<div class="botoneraCentro">
		<input class="botonG marginR15" id="botonSeleccionar" value="Seleccionar Certificado" onclick="seleccionarCertificado();" type="button"><br>
	</div>
	<br>
	<div id="divcert"></div>
	</fieldset>
</form>

	<div class="nota"><p>
	Nota: La selecci&oacute;n del certificado se realiza mediante una aplicaci&oacute;n firmada por la D.G. para Impulso de 
la Administración Electrónica por su seguridad.
	<a href="https://valide.redsara.es/valide/requisitos.html" class="enlace">
		Pulsa aquí para ver los requisitos de funcionamiento
	</a>
	</p>
	</div>

</div>
				</div>

<div style="float: left; width: 200px; margin-left: 30px; margin-top: 60px;">
<a href="https://play.google.com/store/apps/details?id=es.gob.afirma">
  <img alt="Get it on Google Play" src="https://play.google.com/intl/en_us/badges/images/generic/es-play-badge-border.png" style="width: 140px;"/>
</a>
</div>

<div style="float: left; width: 200px; margin-left: 30px; margin-top: 20px;">
<a href="https://itunes.apple.com/us/app/cliente-firma-movil/id627410001?mt=8&uo=4" target="itunes_store" style="display:inline-block;overflow:hidden;background:url(https://linkmaker.itunes.apple.com/assets/shared/badges/es-es/appstore-lrg.svg) no-repeat;width:135px;height:40px;background-size:contain;"></a>
</div>

				 <div class="clear"></div>
			</div><!-- FIN DE CUERPO -->
		</div><!-- FIN DE CONTENIDO -->
		<div id="contenidoBottom"></div>
		<div id="pie">

<!-- LOGOS PIE ** -->
<div id="logos">
	<img src="img/btn_w3c_aa.gif" class="logo_w3c" alt="W3C AA">
	<img src="img/btn_w3c_css.gif" class="logo_w3c" alt="W3C CSS">
	<img src="img/btn_w3c_xhtml.gif" class="logo_w3c" alt="W3C HTML">
</div>
<!-- FIN DE LOGOS PIE ** -->
<!-- MENÚ PIE ** -->

		</div>
	</div> <!-- FIN DE CONTENEDOR -->
	
</body></html>